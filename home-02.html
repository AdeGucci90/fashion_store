<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <title>Home – Modern Store</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- SEO -->
  <meta name="description" content="Discover apparel, shoes, watches and accessories. Fast checkout, modern UI, and dynamic product filters." />
  <link rel="canonical" href="/" />

  <!-- Open Graph -->
  <meta property="og:title" content="Modern Store" />
  <meta property="og:description" content="Discover apparel, shoes, watches and accessories with a modern shopping experience." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="/" />
  <meta property="og:image" content="images/slide-01.jpg" />

  <!-- Theme color -->
  <meta name="theme-color" content="#111827" />

  <!-- Manifest for PWA -->
  <link rel="manifest" href="/manifest.webmanifest" />

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="images/icons/favicon.png" />

  <!-- Tailwind CSS (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Tailwind config
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: { DEFAULT: '#111827', 50:'#f9fafb', 100:'#f3f4f6', 200:'#e5e7eb', 300:'#d1d5db', 400:'#9ca3af', 500:'#6b7280', 600:'#4b5563', 700:'#374151', 800:'#1f2937', 900:'#111827' },
            brand: '#0ea5e9'
          },
          boxShadow: {
            'elev': '0 10px 25px rgba(0,0,0,.08)'
          }
        }
      }
    }
    // Dark mode init
    (function() {
      const ls = localStorage.getItem('darkMode');
      if (ls === 'true' || (!ls && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
      }
    })();
  </script>

  <!-- Alpine.js -->
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

  <!-- Preload hero image -->
  <link rel="preload" as="image" href="images/slide-01.jpg" />
  <style>
    /* Minimal CSS for skeletons & transitions that supplement Tailwind */
    .skeleton {
      position: relative;
      overflow: hidden;
      background: linear-gradient(90deg, rgba(0,0,0,0.08) 25%, rgba(0,0,0,0.14) 37%, rgba(0,0,0,0.08) 63%);
      background-size: 400% 100%;
      animation: shimmer 1.4s ease infinite;
    }
    @keyframes shimmer { 0% { background-position: 100% 0; } 100% { background-position: 0 0; } }
  </style>
</head>
<body class="bg-white dark:bg-primary-900 text-primary-900 dark:text-primary-100 antialiased selection:bg-brand/20" x-data>
  <!-- Top Announcement -->
  <div class="bg-brand/10 dark:bg-brand/20 text-primary-900 dark:text-white text-sm">
    <div class="max-w-7xl mx-auto px-4 py-2 text-center">
      Free shipping on orders over $100
    </div>
  </div>

  <!-- Header -->
  <header class="sticky top-0 z-40 bg-white/90 dark:bg-primary-900/75 backdrop-blur border-b border-primary-100 dark:border-primary-800">
    <div class="max-w-7xl mx-auto px-4">
      <div class="flex items-center justify-between h-16">
        <!-- Left: Logo -->
        <a href="/" class="flex items-center gap-3">
          <img src="images/icons/logo-01.png" alt="Store Logo" class="h-8 w-auto" />
          <span class="hidden sm:inline font-semibold tracking-tight">Modern Store</span>
        </a>

        <!-- Center: Nav -->
        <nav class="hidden md:flex items-center gap-6 text-sm">
          <a href="/" class="hover:text-brand">Home</a>
          <a href="#catalog" class="hover:text-brand">Shop</a>
          <a href="#features" class="hover:text-brand">Features</a>
          <a href="#blog" class="hover:text-brand">Blog</a>
          <a href="#about" class="hover:text-brand">About</a>
          <a href="#contact" class="hover:text-brand">Contact</a>
        </nav>

        <!-- Right: Actions -->
        <div class="flex items-center gap-2">
          <!-- Search -->
          <button @click="$store.ui.toggleSearch()" aria-label="Search" class="p-2 rounded hover:bg-primary-50 dark:hover:bg-primary-800">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-4.35-4.35m0 0a7.5 7.5 0 1 0-10.6 0 7.5 7.5 0 0 0 10.6 0z" />
            </svg>
          </button>
          <!-- Wishlist (static placeholder) -->
          <button aria-label="Wishlist" class="hidden sm:inline p-2 rounded hover:bg-primary-50 dark:hover:bg-primary-800">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 21s-8-4.438-8-11a5 5 0 0 1 9-3 5 5 0 0 1 9 3c0 6.562-8 11-8 11z"/>
            </svg>
          </button>
          <!-- Dark Mode -->
          <button @click="$store.ui.toggleDark()" aria-label="Toggle dark mode" class="p-2 rounded hover:bg-primary-50 dark:hover:bg-primary-800">
            <template x-if="$store.ui.dark">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24"><path d="M21.752 15.002A9 9 0 1 1 12.998 2.25c.27 0 .537.014.8.04a.75.75 0 0 1 .342 1.365 7.5 7.5 0 0 0 9.248 10.048.75.75 0 0 1 1.365.299z"/></svg>
            </template>
            <template x-if="!$store.ui.dark">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 18a1 1 0 0 1 1 1v2a1 1 0 1 1-2 0v-2a1 1 0 0 1 1-1zm0-12a1 1 0 0 1-1-1V3a1 1 0 1 1 2 0v2a1 1 0 0 1-1 1zm8 5a1 1 0 0 1 1 1c0 .552-.448 1-1 1h-2a1 1 0 1 1 0-2h2zM8 12a1 1 0 0 1-1 1H5a1 1 0 1 1 0-2h2a1 1 0 0 1 1 1zm10.95 5.364a1 1 0 0 1 0 1.414l-1.414 1.414a1 1 0 0 1-1.414-1.414l1.414-1.414a1 1 0 0 1 1.414 0zM7.879 7.879a1 1 0 0 1-1.414 0L5.05 6.464A1 1 0 1 1 6.464 5.05L7.88 6.465a1 1 0 0 1 0 1.414zM18.95 5.05a1 1 0 0 1 0 1.414L17.536 7.88a1 1 0 1 1-1.414-1.414L17.536 5.05a1 1 0 0 1 1.414 0zM7.878 18.95a1 1 0 0 1-1.414 0L5.05 17.536A1 1 0 1 1 6.464 16.12l1.414 1.415a1 1 0 0 1 0 1.414z"/></svg>
            </template>
          </button>
          <!-- Cart -->
          <button @click="$store.ui.toggleCart()" class="relative p-2 rounded hover:bg-primary-50 dark:hover:bg-primary-800" aria-label="Cart">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24"><path d="M7 4h-2l-1 2h2l3.6 7.59-1.35 2.44C7.85 17.37 8.62 19 10 19h9v-2H10l1.1-2h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49A1 1 0 0 0 23 5H6.21l-.94-2ZM7 20a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm11 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z"/></svg>
            <span x-show="$store.cart.count > 0" x-text="$store.cart.count"
                  class="absolute -top-1 -right-1 text-[10px] px-1.5 py-0.5 rounded-full bg-brand text-white"
                  aria-hidden="true"></span>
          </button>
          <!-- Mobile Menu -->
          <button @click="$store.ui.toggleMobile()" class="md:hidden p-2 rounded hover:bg-primary-50 dark:hover:bg-primary-800" aria-label="Open menu">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"/></svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Mobile Nav -->
    <div x-show="$store.ui.mobileOpen" @click.outside="$store.ui.mobileOpen=false" x-transition
         class="md:hidden border-t border-primary-100 dark:border-primary-800 bg-white dark:bg-primary-900">
      <nav class="max-w-7xl mx-auto px-4 py-3 grid gap-3 text-sm">
        <a href="/" class="hover:text-brand">Home</a>
        <a href="#catalog" class="hover:text-brand">Shop</a>
        <a href="#features" class="hover:text-brand">Features</a>
        <a href="#blog" class="hover:text-brand">Blog</a>
        <a href="#about" class="hover:text-brand">About</a>
        <a href="#contact" class="hover:text-brand">Contact</a>
      </nav>
    </div>
  </header>

  <!-- Search overlay -->
  <div x-show="$store.ui.searchOpen" x-transition.opacity class="fixed inset-0 z-40 bg-black/40"></div>
  <div x-show="$store.ui.searchOpen" x-trap="$store.ui.searchOpen" x-transition
       class="fixed inset-x-0 top-16 z-50 bg-white dark:bg-primary-900 border-b border-primary-100 dark:border-primary-800">
    <div class="max-w-3xl mx-auto px-4 py-4" x-data="searchBox()">
      <div class="relative">
        <input x-model="q" @keydown.escape="$store.ui.searchOpen=false" type="search" placeholder="Search products..."
               class="w-full px-4 py-3 rounded-md bg-primary-50 dark:bg-primary-800 outline-none"
               aria-label="Search products" />
        <button @click="$store.ui.searchOpen=false" aria-label="Close search"
                class="absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded hover:bg-primary-100 dark:hover:bg-primary-700">
          ✕
        </button>
      </div>
      <!-- Suggestions -->
      <div x-show="q.length > 0" class="mt-3 bg-white dark:bg-primary-900 rounded-md shadow-elev">
        <template x-for="item in results" :key="item.id">
          <a :href="'#product-' + item.id" @click="$store.ui.searchOpen=false"
             class="flex items-center gap-3 px-4 py-2 hover:bg-primary-50 dark:hover:bg-primary-800">
            <img :src="item.image" alt="" class="h-10 w-10 rounded object-cover" loading="lazy" />
            <div class="flex-1">
              <div class="text-sm font-medium" x-text="item.name"></div>
              <div class="text-xs text-primary-500" x-text="item.category"></div>
            </div>
            <div class="text-sm font-semibold" x-text="toCurrency(item.price)"></div>
          </a>
        </template>
        <div x-show="results.length === 0" class="px-4 py-3 text-sm text-primary-500">No matches</div>
      </div>
    </div>
  </div>

  <!-- Hero -->
  <section class="relative overflow-hidden">
    <div class="absolute inset-0">
      <div class="h-[56vh] sm:h-[70vh] w-full bg-cover bg-center"
           style="background-image:url('images/slide-01.jpg')"></div>
      <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/30 to-transparent"></div>
    </div>
    <div class="relative max-w-7xl mx-auto px-4 h-[56vh] sm:h-[70vh] flex items-end sm:items-center">
      <div class="pb-10 sm:pb-0">
        <span class="inline-block mb-3 text-xs tracking-widest uppercase text-white/80">New Season</span>
        <h1 class="text-3xl sm:text-5xl font-extrabold text-white drop-shadow">Elevate Your Style</h1>
        <p class="mt-3 text-white/90 max-w-xl">Explore curated collections for Women, Men, and Accessories.</p>
        <div class="mt-6 flex gap-3">
          <a href="#catalog" class="px-5 py-3 bg-brand text-white rounded-md hover:bg-sky-500">Shop Now</a>
          <a href="#features" class="px-5 py-3 bg-white/20 text-white rounded-md hover:bg-white/30">View Features</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Categories -->
  <section class="max-w-7xl mx-auto px-4 py-12">
    <div class="grid sm:grid-cols-3 gap-6" id="features">
      <a href="#catalog" class="group relative rounded-xl overflow-hidden shadow-elev">
        <img src="images/banner-01.jpg" alt="Women" class="w-full h-60 object-cover transition-transform duration-500 group-hover:scale-105" />
        <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent"></div>
        <div class="absolute bottom-0 p-5 text-white">
          <div class="text-xl font-semibold">Women</div>
          <div class="text-sm text-white/80">Spring 2025</div>
        </div>
      </a>
      <a href="#catalog" class="group relative rounded-xl overflow-hidden shadow-elev">
        <img src="images/banner-02.jpg" alt="Men" class="w-full h-60 object-cover transition-transform duration-500 group-hover:scale-105" />
        <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent"></div>
        <div class="absolute bottom-0 p-5 text-white">
          <div class="text-xl font-semibold">Men</div>
          <div class="text-sm text-white/80">New Arrivals</div>
        </div>
      </a>
      <a href="#catalog" class="group relative rounded-xl overflow-hidden shadow-elev">
        <img src="images/banner-03.jpg" alt="Accessories" class="w-full h-60 object-cover transition-transform duration-500 group-hover:scale-105" />
        <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent"></div>
        <div class="absolute bottom-0 p-5 text-white">
          <div class="text-xl font-semibold">Accessories</div>
          <div class="text-sm text-white/80">Trending Now</div>
        </div>
      </a>
    </div>
  </section>

  <!-- Catalog -->
  <section id="catalog" class="max-w-7xl mx-auto px-4 pb-24" x-data="catalog()">
    <div class="flex items-end justify-between gap-4">
      <div>
        <h2 class="text-2xl font-bold">Product Overview</h2>
        <p class="text-sm text-primary-500">Filter, sort, and discover your favorites.</p>
      </div>
      <div class="hidden sm:flex items-center gap-2">
        <label class="text-sm">Sort:</label>
        <select x-model="sort" class="text-sm rounded-md border border-primary-200 dark:border-primary-700 bg-white dark:bg-primary-900 px-3 py-2">
          <option value="default">Default</option>
          <option value="popularity">Popularity</option>
          <option value="rating">Average rating</option>
          <option value="newness">Newness</option>
          <option value="price-asc">Price: Low to High</option>
          <option value="price-desc">Price: High to Low</option>
        </select>
      </div>
    </div>

    <!-- Filters -->
    <div class="mt-6 grid gap-3 md:grid-cols-4">
      <div class="md:col-span-1 space-y-4">
        <!-- Search -->
        <div>
          <label class="block text-sm mb-1">Search</label>
          <input x-model.debounce.300ms="search" type="text" placeholder="Search products..."
                 class="w-full rounded-md px-3 py-2 bg-primary-50 dark:bg-primary-800 border border-primary-200 dark:border-primary-700" />
        </div>
        <!-- Categories -->
        <div>
          <div class="text-sm mb-1">Categories</div>
          <div class="flex flex-wrap gap-2">
            <template x-for="cat in categories" :key="cat">
              <button @click="toggleCategory(cat)"
                      :class="selectedCategories.has(cat) ? 'bg-brand text-white' : 'bg-primary-50 dark:bg-primary-800 text-primary-700 dark:text-primary-200'"
                      class="px-3 py-1 rounded-full text-xs">
                <span x-text="cat"></span>
              </button>
            </template>
          </div>
        </div>
        <!-- Price -->
        <div>
          <div class="flex justify-between text-sm">
            <span>Price</span>
            <span x-text="`${toCurrency(price[0])} - ${toCurrency(price[1])}`"></span>
          </div>
          <div class="mt-2">
            <input type="range" min="0" max="200" step="1" x-model.number="price[0]" class="w-full">
            <input type="range" min="0" max="200" step="1" x-model.number="price[1]" class="w-full mt-1">
          </div>
        </div>
        <!-- Colors -->
        <div>
          <div class="text-sm mb-1">Color</div>
          <div class="flex gap-2">
            <template x-for="c in colors" :key="c">
              <button @click="color = color===c ? '' : c" class="h-7 w-7 rounded-full border-2"
                      :style="`border-color:${color===c ? 'var(--tw-ring-color, #0ea5e9)' : '#e5e7eb'}`"
                      :class="{
                        'ring-2 ring-brand': color === c
                      }">
                <span class="sr-only" x-text="c"></span>
                <span class="block h-full w-full rounded-full" :style="`background:${c}`"></span>
              </button>
            </template>
          </div>
        </div>
        <!-- Reset -->
        <button @click="resetFilters()" class="text-sm underline text-primary-500 hover:text-brand">Reset filters</button>
      </div>

      <!-- Products Grid -->
      <div class="md:col-span-3">
        <!-- Sort (mobile) -->
        <div class="sm:hidden flex items-center gap-2 mb-3">
          <label class="text-sm">Sort:</label>
          <select x-model="sort" class="text-sm rounded-md border border-primary-200 dark:border-primary-700 bg-white dark:bg-primary-900 px-3 py-2">
            <option value="default">Default</option>
            <option value="popularity">Popularity</option>
            <option value="rating">Average rating</option>
            <option value="newness">Newness</option>
            <option value="price-asc">Price: Low to High</option>
            <option value="price-desc">Price: High to Low</option>
          </select>
        </div>

        <!-- Grid -->
        <div class="grid xs:grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5">
          <!-- Skeletons while loading -->
          <template x-if="loading">
            <template x-for="i in 8" :key="i">
              <div class="rounded-lg overflow-hidden border border-primary-100 dark:border-primary-800">
                <div class="h-40 skeleton"></div>
                <div class="p-3 space-y-2">
                  <div class="h-4 w-2/3 skeleton"></div>
                  <div class="h-4 w-1/3 skeleton"></div>
                </div>
              </div>
            </template>
          </template>

          <!-- Products -->
          <template x-for="p in pagedProducts" :key="p.id">
            <div :id="'product-' + p.id" class="group rounded-lg overflow-hidden border border-primary-100 dark:border-primary-800 bg-white dark:bg-primary-900 hover:shadow-elev transition">
              <div class="relative">
                <img :src="p.image" :alt="p.name" loading="lazy" class="w-full h-48 object-cover" />
                <button @click="openQuickLook(p)"
                        class="absolute bottom-3 left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition px-3 py-1.5 text-xs rounded-md bg-black/70 text-white">
                  Quick View
                </button>
                <div class="absolute top-3 left-3">
                  <span class="px-2 py-0.5 rounded text-[10px] bg-brand text-white" x-show="p.tag" x-text="p.tag"></span>
                </div>
              </div>
              <div class="p-3">
                <div class="text-sm text-primary-500" x-text="p.category"></div>
                <div class="font-medium mt-0.5 line-clamp-1" x-text="p.name"></div>
                <div class="mt-1 flex items-center justify-between">
                  <div class="font-semibold" x-text="toCurrency(p.price)"></div>
                  <div class="flex items-center gap-0.5 text-amber-400">
                    <template x-for="i in 5"><span x-html="i<=Math.round(p.rating)?'&#9733;':'&#9734;'"></span></template>
                  </div>
                </div>
                <div class="mt-3 flex gap-2">
                  <button @click="$store.cart.add(p,1)" class="flex-1 text-sm px-3 py-2 rounded-md bg-primary-900 text-white dark:bg-white dark:text-primary-900 hover:opacity-90">Add to cart</button>
                  <button @click="openQuickLook(p)" class="px-3 py-2 text-sm rounded-md border border-primary-200 dark:border-primary-700">Details</button>
                </div>
              </div>
            </div>
          </template>
        </div>

        <!-- Load more -->
        <div class="mt-8 flex justify-center" x-show="!loading && hasMore">
          <button @click="page++" class="px-5 py-2 rounded-md border border-primary-200 dark:border-primary-700 hover:bg-primary-50 dark:hover:bg-primary-800">
            Load more
          </button>
        </div>
        <div class="mt-8 text-center text-sm text-primary-500" x-show="!loading && !hasMore">
          You've reached the end.
        </div>
      </div>
    </div>
  </section>

  <!-- Quick Look Modal -->
  <div x-show="$store.ui.quickOpen" x-transition.opacity class="fixed inset-0 z-50 bg-black/50"></div>
  <div x-show="$store.ui.quickOpen" x-trap="$store.ui.quickOpen" x-transition
       class="fixed inset-0 z-50 flex items-center justify-center p-4">
    <div class="relative max-w-4xl w-full bg-white dark:bg-primary-900 rounded-xl overflow-hidden shadow-elev" @click.outside="$store.ui.closeQuick()">
      <button class="absolute top-3 right-3 p-2 rounded hover:bg-primary-100 dark:hover:bg-primary-800" @click="$store.ui.closeQuick()" aria-label="Close">
        ✕
      </button>
      <div class="grid md:grid-cols-2 gap-0">
        <div class="bg-primary-50 dark:bg-primary-800">
          <img :src="$store.ui.quickProduct.image" :alt="$store.ui.quickProduct.name" class